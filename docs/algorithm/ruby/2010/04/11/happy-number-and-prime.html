<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>happy number and prime - Yankist</title>
<meta name="description" content="A happy number is defined by the following process. Starting with any positive integer, replace the number by the sum of the squares of its digits, and repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1. Those numbers for which this process ends in 1 are happy numbers, while those that do not end in 1 are unhappy numbers (or sad numbers[1]).">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Yankist">
<meta property="og:title" content="happy number and prime">
<meta property="og:url" content="http://0.0.0.0:4000/algorithm/ruby/2010/04/11/happy-number-and-prime.html">


  <meta property="og:description" content="A happy number is defined by the following process. Starting with any positive integer, replace the number by the sum of the squares of its digits, and repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1. Those numbers for which this process ends in 1 are happy numbers, while those that do not end in 1 are unhappy numbers (or sad numbers[1]).">







  <meta property="article:published_time" content="2010-04-11T10:15:00+00:00">






<link rel="canonical" href="http://0.0.0.0:4000/algorithm/ruby/2010/04/11/happy-number-and-prime.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "http://0.0.0.0:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Yankist Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Yankist
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/rails/2022/03/21/docker-on-rails7.html">Quick-Start Rails 7</a>
            </li><li class="masthead__menu-item">
              <a href="/">Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/page-archive/">Pages</a>
            </li><li class="masthead__menu-item">
              <a href="/collection-archive/">Collections</a>
            </li><li class="masthead__menu-item">
              <a href="/feed.xml">Feed</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="happy number and prime">
    <meta itemprop="description" content="A happy number is defined by the following process. Starting with any positive integer, replace the number by the sum of the squares of its digits, and repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1. Those numbers for which this process ends in 1 are happy numbers, while those that do not end in 1 are unhappy numbers (or sad numbers[1]).">
    <meta itemprop="datePublished" content="2010-04-11T10:15:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">happy number and prime
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>A happy number is defined by the following process. Starting with any positive integer, replace the number by the sum of the squares of its digits, and repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1. Those numbers for which this process ends in 1 are happy numbers, while those that do not end in 1 are unhappy numbers (or sad numbers[1]).</p>

<p>More formally, given a number , define a sequence , , â€¦ where  is the sum of the squares of the digits of . Then n is happy if and only if there exists i such that .
If a number is happy, then all members of its sequence are happy; if a number is unhappy, all members of the sequence are unhappy.
For example, 19 is happy, as the associated sequence is:
12 + 92 = 82
82 + 22 = 68
62 + 82 = 100
12 + 02 + 02 = 1.
The happy numbers below 500 are:
1, 7, 10, 13, 19, 23, 28, 31, 32, 44, 49, 68, 70, 79, 82, 86, 91, 94, 97, 100, 103, 109, 129, 130, 133, 139, 167, 176, 188, 190, 192, 193, 203, 208, 219, 226, 230, 236, 239, 262, 263, 280, 291, 293, 301, 302, 310, 313, 319, 320, 326, 329, 331, 338, 356, 362, 365, 367, 368, 376, 379, 383, 386, 391, 392, 397, 404, 409, 440, 446, 464, 469, 478, 487, 490, 496</p>

<p>calculation:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@dead_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="vi">@cache</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">def</span> <span class="nf">happy?</span> <span class="n">num</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="nf">to_s</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s1">''</span><span class="p">).</span><span class="nf">inject</span><span class="p">(</span><span class="mi">0</span><span class="p">){</span><span class="o">|</span><span class="n">sum</span><span class="p">,</span><span class="n">x</span><span class="o">|</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">x</span><span class="p">.</span><span class="nf">to_i</span> <span class="o">**</span> <span class="mi">2</span><span class="p">}</span>
  <span class="k">return</span> <span class="kp">false</span> <span class="k">if</span> <span class="vi">@dead_list</span><span class="p">.</span><span class="nf">include?</span> <span class="n">result</span>
  <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="vi">@cache</span> <span class="o">=</span> <span class="p">[]</span> 
    <span class="k">return</span> <span class="kp">true</span>
  <span class="k">end</span>
  <span class="k">if</span> <span class="vi">@cache</span><span class="p">.</span><span class="nf">include?</span> <span class="n">result</span>
    <span class="vi">@dead_list</span> <span class="o">&lt;&lt;</span> <span class="n">result</span>
    <span class="k">return</span> <span class="kp">false</span> 
  <span class="k">end</span>
  <span class="vi">@cache</span> <span class="o">&lt;&lt;</span> <span class="n">result</span>
  <span class="k">return</span> <span class="n">happy?</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">prime?</span> <span class="n">num</span>
  <span class="k">return</span> <span class="kp">false</span> <span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">or</span> <span class="p">(</span><span class="n">num</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">or</span> <span class="p">(</span><span class="n">num</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
  <span class="n">end_num</span> <span class="o">=</span> <span class="no">Math</span><span class="p">.</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">num</span><span class="p">).</span><span class="nf">ceil</span><span class="p">.</span><span class="nf">to_i</span>
  <span class="p">(</span><span class="mi">2</span><span class="o">..</span><span class="n">end_num</span><span class="p">).</span><span class="nf">to_a</span><span class="p">.</span><span class="nf">each</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="k">return</span> <span class="kp">false</span> <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>
<p>and we can also embed to String</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Fixnum</span>
  <span class="k">class</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span><span class="p">;</span>  <span class="nb">attr_accessor</span> <span class="ss">:dead_list</span><span class="p">;</span> <span class="k">end</span>
  <span class="nb">attr_accessor</span> <span class="ss">:cache</span>
  <span class="nb">load</span> <span class="s1">'happy_prime.rb'</span>

  <span class="k">def</span> <span class="nf">is_happy?</span>
    <span class="vi">@cache</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="vi">@dead_list</span> <span class="o">||=</span> <span class="p">[]</span>
    <span class="n">happy?</span> <span class="nb">self</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">is_prime?</span>
    <span class="n">prime?</span> <span class="nb">self</span>
    <span class="c1">#or</span>
    <span class="c1">#require 'mathn'</span>
    <span class="c1">#self.prime?</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        


  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/algorithm" class="page__taxonomy-item" rel="tag">algorithm</a><span class="sep">, </span>
    
      <a href="/categories/ruby" class="page__taxonomy-item" rel="tag">ruby</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2010-04-11T10:15:00+00:00">April 11, 2010</time></p>


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/algorithm/ruby/2010/04/10/triangle-problem.html" class="pagination--pager" title="triangle problem
">Previous</a>
    
    
      <a href="/git/revert/2010/05/22/how-to-revert-git-commit-remote.html" class="pagination--pager" title="how to revert git commit remote
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <div class="page__footer-copyright"><a href="https://www.linkedin.com/in/kenlv">Ken Lu</a>. <a href="https://www.linkedin.com/in/andrewpaliyan">Andrew Paliyan</a>.</div>
  
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Yankist. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
